# Puyo Puyo 2 構想イメージ

## コンセプト

**「つながる、競う、創る」** - シングルプレイの楽しさを維持しながら、ソーシャル要素とクリエイティブ要素を融合した次世代ぷよぷよ。

---

## 新機能概要

### 1. ストーリーモード

#### ワールドマップ
- 5つのワールド、各ワールドに10ステージ
- ステージクリアで次のステージが解放
- 各ワールドにボスステージ（AI対戦）

#### キャラクターシステム
- 複数のプレイアブルキャラクター
- キャラクターごとに固有スキル
  - 例: 「アルル」- 連鎖ボーナス+10%
  - 例: 「カーバンクル」- おじゃまぷよ軽減

#### ストーリー進行
- キャラクター間の会話イベント
- レトロなドット絵カットシーン

---

### 2. 対戦システム

#### ローカル対戦
- 画面分割2P対戦
- おじゃまぷよシステム
  - 連鎖数に応じて相手に送る
  - 相殺システム（同時消去で軽減）

#### オンライン対戦（将来実装）
- マッチメイキングシステム
- レーティング制（ブロンズ→シルバー→ゴールド→プラチナ→ダイヤ）
- シーズン制ランキング

#### 観戦モード
- 上位プレイヤーの対戦を観戦
- リプレイ保存・共有

---

### 3. カスタマイズシステム

#### スキンシステム
- ぷよのデザイン変更（クラシック、ネオン、キュート、ダーク）
- ボード背景テーマ
- エフェクトスタイル

#### サウンドパック
- BGMセット選択
- 効果音カスタマイズ
- ボイスパック（キャラクター別）

#### 操作設定
- キーバインド自由設定
- DAS（遅延自動シフト）調整
- ARR（自動繰り返し速度）調整

---

### 4. チャレンジモード

#### デイリーチャレンジ
- 毎日更新されるお題
- 全プレイヤー同条件で競争
- 達成報酬（スキン、称号など）

#### ウィークリートーナメント
- 週末開催のタイムアタック
- 上位入賞で限定報酬

#### スキルチャレンジ
- 特定条件クリアを目指す
  - 「5連鎖以上を3回達成」
  - 「おじゃまぷよ100個を消す」
  - 「スコア50万点をノーミスで」

---

### 5. パズルエディタ

#### ステージ作成
- ドラッグ&ドロップでぷよ配置
- クリア条件設定
- 難易度タグ付け

#### コミュニティ共有
- 作成ステージをアップロード
- 他プレイヤーのステージをプレイ
- いいね・コメント機能

#### キュレーション
- 人気ステージランキング
- 公式ピックアップ
- 難易度別フィルター

---

### 6. 実績・コレクション

#### アチーブメント
| カテゴリ | 例 |
|---------|-----|
| 初心者 | 初めての連鎖、初クリア |
| 連鎖マスター | 5連鎖達成、10連鎖達成、19連鎖達成 |
| スコアハンター | 10万点、100万点、1000万点 |
| コレクター | 全スキン収集、全キャラ解放 |
| ソーシャル | 対戦10勝、パズル共有 |

#### 称号システム
- 実績に応じて称号を獲得
- プロフィールに表示
- レアリティ別（コモン、レア、エピック、レジェンダリー）

#### 統計ダッシュボード
- 総プレイ時間
- 最大連鎖数
- 総消去ぷよ数
- 勝率（対戦）
- グラフによる推移表示

---

## 技術仕様

### アーキテクチャ
```
src/
├── app/
│   ├── page.tsx              # ホーム画面
│   ├── story/                # ストーリーモード
│   ├── versus/               # 対戦モード
│   ├── challenge/            # チャレンジモード
│   ├── editor/               # パズルエディタ
│   ├── profile/              # プロフィール・実績
│   └── settings/             # 設定
├── components/
│   ├── game/                 # ゲーム関連コンポーネント
│   ├── ui/                   # 共通UIコンポーネント
│   ├── story/                # ストーリー関連
│   └── editor/               # エディタ関連
├── hooks/
│   ├── useGameEngine.ts      # ゲームロジック
│   ├── useMultiplayer.ts     # 対戦ロジック
│   ├── useAchievements.ts    # 実績管理
│   └── useAudio.ts           # サウンド管理
├── stores/
│   ├── gameStore.ts          # ゲーム状態
│   ├── userStore.ts          # ユーザーデータ
│   └── settingsStore.ts      # 設定
├── lib/
│   ├── ai/                   # AI対戦ロジック
│   ├── audio/                # サウンドエンジン
│   └── storage/              # データ永続化
└── types/
    └── index.ts              # 型定義
```

### 状態管理
- Zustand による軽量状態管理
- LocalStorage によるデータ永続化
- IndexedDB による大容量データ保存（リプレイ等）

### オーディオシステム
- Web Audio API
- Howler.js ラッパー
- BGM / SE / ボイス 独立ボリューム

### パフォーマンス目標
- 60fps 維持
- FCP < 1.5秒
- LCP < 2.0秒
- PWA対応（オフラインプレイ可能）

---

## UI/UXデザイン

### ビジュアルテーマ
- **メインカラー**: 宇宙パープル (#1a1a2e → #16213e)
- **アクセント**: ネオンピンク (#ff2e63) / シアン (#00fff5)
- **フォント**: Geist Mono（スコア）、Geist Sans（UI）

### アニメーション
- Framer Motion によるページ遷移
- CSS アニメーションによるゲームエフェクト
- パーティクルシステム（消去時）

### レスポンシブ対応
- モバイル: タッチ操作最適化
- タブレット: 横向き推奨
- デスクトップ: キーボード操作

---

## 実装ロードマップ

### Phase 1: 基盤強化
- [ ] ホールド機能
- [ ] ゴースト表示
- [ ] サウンドシステム
- [ ] 実績システム基盤

### Phase 2: シングルプレイ拡張
- [ ] ストーリーモード（ワールド1）
- [ ] チャレンジモード
- [ ] AI対戦（基本）

### Phase 3: ソーシャル機能
- [ ] ローカル対戦
- [ ] パズルエディタ
- [ ] コミュニティ共有

### Phase 4: オンライン機能
- [ ] オンライン対戦
- [ ] グローバルランキング
- [ ] デイリーチャレンジ配信

---

## 参考・インスピレーション

- ぷよぷよ通（対戦システム）
- ぷよぷよテトリス（クロスオーバー要素）
- テトリス99（バトルロイヤル形式）
- パズル&ドラゴンズ（ガチャ・コレクション要素）

---

*Last Updated: 2025-01-12*
